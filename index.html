<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isaac Nutrición v4.1.0 FUNCIONAL</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="app-header">
            <div class="logo-container">
                <i class="fas fa-leaf logo-icon"></i>
                <h1>Isaac Nutrición v4.1.0 FUNCIONAL</h1>
                <p class="logo-subtitle">Exportación PDF/Word/Markdown/CSV/Print 100% Garantizada</p>
            </div>
        </header>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-step active" id="step1">
                    <div class="step-number">1</div>
                    <div class="step-label">Datos</div>
                </div>
                <div class="progress-step" id="step2">
                    <div class="step-number">2</div>
                    <div class="step-label">Preferencias</div>
                </div>
                <div class="progress-step" id="step3">
                    <div class="step-number">3</div>
                    <div class="step-label">Preview</div>
                </div>
                <div class="progress-step" id="step4">
                    <div class="step-number">4</div>
                    <div class="step-label">Dieta + HSN</div>
                </div>
            </div>
        </div>

        <!-- Sección 1: Datos Personales -->
        <section id="personalSection" class="form-section">
            <div class="section-header">
                <i class="fas fa-user section-icon"></i>
                <h2>Datos Personales</h2>
                <p class="section-description">Introduce tus datos básicos</p>
            </div>

            <form id="personalForm">
                <div class="form-subsection">
                    <h3><i class="fas fa-id-card"></i> Información Básica</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="nombre" class="form-label">Nombre *</label>
                            <input type="text" id="nombre" name="nombre" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="apellido" class="form-label">Apellido *</label>
                            <input type="text" id="apellido" name="apellido" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="edad" class="form-label">Edad *</label>
                            <input type="number" id="edad" name="edad" class="form-control" min="15" max="100" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Sexo *</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="sexo" value="hombre" required>
                                    <span>Hombre</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="sexo" value="mujer" required>
                                    <span>Mujer</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="peso" class="form-label">Peso (kg) *</label>
                            <input type="number" id="peso" name="peso" class="form-control" step="0.1" min="30" max="200" required>
                        </div>
                        <div class="form-group">
                            <label for="altura" class="form-label">Altura (cm) *</label>
                            <input type="number" id="altura" name="altura" class="form-control" min="140" max="220" required>
                        </div>
                        <div class="form-group">
                            <label for="nivelActividad" class="form-label">Nivel de Actividad *</label>
                            <select id="nivelActividad" name="nivelActividad" class="form-control" required>
                                <option value="">Seleccionar...</option>
                                <option value="sedentario">Sedentario</option>
                                <option value="ligero">Ligero</option>
                                <option value="moderado">Moderado</option>
                                <option value="intenso">Intenso</option>
                                <option value="muy_intenso">Muy Intenso</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="calculations-display" id="calculationsDisplay" style="display: none;">
                    <h3><i class="fas fa-calculator"></i> Cálculos Automáticos</h3>
                    <div class="calculations-grid">
                        <div class="calc-card">
                            <span class="calc-value" id="tmbValue">--</span>
                            <span class="calc-label">TMB (kcal)</span>
                        </div>
                        <div class="calc-card">
                            <span class="calc-value" id="imcValue">--</span>
                            <span class="calc-label">IMC</span>
                        </div>
                        <div class="calc-card">
                            <span class="calc-value" id="caloriasMantenimientoValue">--</span>
                            <span class="calc-label">Calorías/día</span>
                        </div>
                        <div class="calc-card">
                            <span class="calc-value" id="categoriaIMC">--</span>
                            <span class="calc-label">Categoría</span>
                        </div>
                    </div>
                </div>
            </form>

            <div class="section-buttons">
                <button type="button" id="continueToPreferencesBtn" class="btn btn-primary" disabled>
                    <i class="fas fa-arrow-right"></i>
                    Continuar
                </button>
            </div>
        </section>

        <!-- Sección 2: Preferencias -->
        <section id="preferencesSection" class="form-section" style="display: none;">
            <div class="section-header">
                <i class="fas fa-heart section-icon"></i>
                <h2>Preferencias Dietéticas</h2>
            </div>

            <form id="preferencesForm">
                <div class="form-subsection">
                    <h3><i class="fas fa-bullseye"></i> Objetivo</h3>
                    <div class="objective-grid">
                        <label class="objective-card">
                            <input type="radio" name="objetivo" value="ganar_masa" required>
                            <div class="card-content">
                                <i class="fas fa-dumbbell"></i>
                                <h4>Ganar Masa</h4>
                                <p>Aumentar músculo</p>
                            </div>
                        </label>
                        <label class="objective-card">
                            <input type="radio" name="objetivo" value="perder_peso" required>
                            <div class="card-content">
                                <i class="fas fa-weight"></i>
                                <h4>Perder Peso</h4>
                                <p>Reducir grasa</p>
                            </div>
                        </label>
                        <label class="objective-card">
                            <input type="radio" name="objetivo" value="mantener_peso" required>
                            <div class="card-content">
                                <i class="fas fa-balance-scale"></i>
                                <h4>Mantener</h4>
                                <p>Conservar peso</p>
                            </div>
                        </label>
                        <label class="objective-card">
                            <input type="radio" name="objetivo" value="mejorar_salud" required>
                            <div class="card-content">
                                <i class="fas fa-heart"></i>
                                <h4>Salud</h4>
                                <p>Alimentación saludable</p>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="form-subsection">
                    <h3><i class="fas fa-utensils"></i> Preferencias Alimentarias</h3>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="alimentosPreferidos" class="form-label">Alimentos Preferidos</label>
                            <textarea id="alimentosPreferidos" name="alimentosPreferidos" class="form-control textarea-large" rows="3" placeholder="Ej: pollo, arroz, brócoli, salmón..."></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label for="alimentosNoGustan" class="form-label">Alimentos que No Gustan</label>
                            <textarea id="alimentosNoGustan" name="alimentosNoGustan" class="form-control textarea-large" rows="3" placeholder="Ej: hígado, anchoas, col de Bruselas..."></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label for="intoleranciasAlergias" class="form-label">Alergias e Intolerancias</label>
                            <textarea id="intoleranciasAlergias" name="intoleranciasAlergias" class="form-control textarea-large" rows="2" placeholder="Ej: lactosa, frutos secos, gluten..."></textarea>
                        </div>
                    </div>
                </div>
            </form>

            <div class="section-buttons">
                <button type="button" id="backToPersonalBtn" class="btn btn-outline">
                    <i class="fas fa-arrow-left"></i>
                    Volver
                </button>
                <button type="button" id="continueToPreviewBtn" class="btn btn-primary">
                    <i class="fas fa-eye"></i>
                    Preview
                </button>
            </div>
        </section>

        <!-- Sección 3: Previsualización -->
        <section id="previewSection" class="form-section" style="display: none;">
            <div class="section-header">
                <i class="fas fa-eye section-icon"></i>
                <h2>Previsualización</h2>
            </div>

            <div class="preview-content">
                <div class="preview-card">
                    <h3><i class="fas fa-user"></i> Datos Personales</h3>
                    <div id="personalPreview"></div>
                </div>

                <div class="preview-card">
                    <h3><i class="fas fa-heartbeat"></i> Metabolismo</h3>
                    <div id="bodyPreview"></div>
                </div>

                <div class="preview-card">
                    <h3><i class="fas fa-target"></i> Preferencias</h3>
                    <div id="preferencesPreview"></div>
                </div>

                <div class="preview-card">
                    <h3><i class="fas fa-chart-pie"></i> Plan Nutricional</h3>
                    <div id="planSummaryPreview"></div>
                </div>
            </div>

            <div class="section-buttons">
                <button type="button" id="backToPreferencesBtn" class="btn btn-outline">
                    <i class="fas fa-arrow-left"></i>
                    Volver
                </button>
                <button type="button" id="generateDietBtn" class="btn btn-primary">
                    <i class="fas fa-magic"></i>
                    Generar Dieta + HSN
                </button>
            </div>
        </section>

        <!-- Sección 4: Dieta + HSN -->
        <section id="dietSection" class="form-section" style="display: none;">
            <div class="section-header">
                <i class="fas fa-clipboard-list section-icon"></i>
                <h2>Tu Dieta + Productos HSN</h2>
            </div>

            <div id="dietContent">
                <!-- Contenido generado dinámicamente -->
            </div>

            <div class="section-buttons">
                <div class="export-buttons-grid">
                    <button type="button" id="downloadPngBtn" class="btn btn-png">
                        <i class="fas fa-image"></i>
                        PNG
                    </button>
                    <button type="button" id="downloadWordBtn" class="btn btn-secondary">
                        <i class="fas fa-file-word"></i>
                        Word
                    </button>
                    <button type="button" id="downloadMarkdownBtn" class="btn btn-markdown">
                        <i class="fas fa-file-alt"></i>
                        Markdown
                    </button>
                    <button type="button" id="downloadSheetsBtn" class="btn btn-sheets">
                        <i class="fas fa-table"></i>
                        CSV
                    </button>
                    <button type="button" id="printDietBtn" class="btn btn-print">
                        <i class="fas fa-print"></i>
                        Imprimir
                    </button>
                    <button type="button" id="newDietBtn" class="btn btn-outline">
                        <i class="fas fa-plus"></i>
                        Nueva
                    </button>
                </div>
            </div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>