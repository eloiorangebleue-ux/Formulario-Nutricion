<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cuestionario Plan Nutricional – Isaac Nutrición</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="container" role="main" aria-label="Cuestionario Plan Nutricional Isaac Nutrición">
    <header>
      <div class="logo-container">
        <img src="logo-isaac-nutricion.png" alt="Isaac Nutrición Logo" class="logo" />
      </div>
      <h1>🥗 Cuestionario Plan Nutricional</h1>
      <p>Complete sus datos para personalizar su plan nutricional.</p>
    </header>

    <form id="nutrition-form"
          action="https://script.google.com/macros/s/AKfycbyRiSWmtTLVSGRaoqK3fPiHLS90jtkoa--9EkPh72jKTUwinTLg0tVamn4yJeyGm7j53A/exec"
          method="POST"
          target="hidden_iframe">

      <label for="nombre">👤 Nombre *</label>
      <input type="text" id="nombre" name="nombre" required autocomplete="given-name" />

      <label for="apellido">👥 Apellido *</label>
      <input type="text" id="apellido" name="apellido" required autocomplete="family-name" />

      <label for="email">📧 Email *</label>
      <input type="email" id="email" name="email" required placeholder="ejemplo@correo.com" autocomplete="email" />

      <label for="telefono">📱 Teléfono *</label>
      <input type="tel" id="telefono" name="telefono" required placeholder="+34 600 000 000" autocomplete="tel" />

      <label for="edad">🎂 Edad *</label>
      <input type="number" id="edad" name="edad" required min="1" max="120" />

      <fieldset>
        <legend>🎯 Objetivo</legend>
        <div class="options-group">
          <input type="radio" id="obj_perder" name="objetivo" value="Perder peso" required />
          <label for="obj_perder" class="option-button">Perder peso</label>
          <input type="radio" id="obj_mantener" name="objetivo" value="Mantener peso" />
          <label for="obj_mantener" class="option-button">Mantener peso</label>
          <input type="radio" id="obj_ganar" name="objetivo" value="Ganar masa muscular" />
          <label for="obj_ganar" class="option-button">Ganar masa muscular</label>
          <input type="radio" id="obj_salud" name="objetivo" value="Mejorar salud general" />
          <label for="obj_salud" class="option-button">Mejorar salud general</label>
        </div>
      </fieldset>

      <fieldset>
        <legend>🍽️ Alimentos preferidos</legend>
        <div class="options-group">
          <input type="checkbox" id="pollo" name="preferidos[]" value="Pollo" />
          <label for="pollo" class="option-button">🍗 Pollo</label>
          <input type="checkbox" id="pescado" name="preferidos[]" value="Pescado" />
          <label for="pescado" class="option-button">🐟 Pescado</label>
          <input type="checkbox" id="carne_roja" name="preferidos[]" value="Carne roja" />
          <label for="carne_roja" class="option-button">🥩 Carne roja</label>
          <!-- más opciones... -->
        </div>
      </fieldset>

      <fieldset>
        <legend>❌ Alimentos que no me gustan</legend>
        <div class="options-group">
          <input type="checkbox" id="ng_pollo" name="noGustan[]" value="Pollo" />
          <label for="ng_pollo" class="option-button">🍗 Pollo</label>
          <input type="checkbox" id="ng_pescado" name="noGustan[]" value="Pescado" />
          <label for="ng_pescado" class="option-button">🐟 Pescado</label>
          <!-- más opciones... -->
        </div>
      </fieldset>

      <fieldset>
        <legend>⚠️ Intolerancias y Alergias</legend>
        <div class="options-group">
          <input type="checkbox" id="int_gluten" name="intolerencias[]" value="Gluten" />
          <label for="int_gluten" class="option-button">🌾 Gluten</label>
          <input type="checkbox" id="int_lactosa" name="intolerencias[]" value="Lactosa" />
          <label for="int_lactosa" class="option-button">🥛 Lactosa</label>
          <input type="checkbox" id="alg_huevos" name="alergias[]" value="Huevos" />
          <label for="alg_huevos" class="option-button">🥚 Huevos</label>
          <input type="checkbox" id="alg_frutos_secos" name="alergias[]" value="Frutos secos" />
          <label for="alg_frutos_secos" class="option-button">🌰 Frutos secos</label>
          <input type="checkbox" id="otros_int_alg" name="otrosIntolerAl" value="Otros" />
          <label for="otros_int_alg" class="option-button">❓ Otros</label>
        </div>
        <input type="text" id="otros-intoler-alerg" name="otrosIntolerAl" placeholder="Especifique otros" />
      </fieldset>

      <label for="restricciones">🥦 Restricciones adicionales</label>
      <textarea id="restricciones" name="restricciones" rows="3" placeholder="Por ejemplo: vegetariano, sin azúcar..."></textarea>

      <button type="submit">Enviar</button>
    </form>

    <iframe name="hidden_iframe" style="display:none;"></iframe>

    <div id="success-message" class="success-popup hidden">
      <div class="success-content">
        <div class="success-icon">✅</div>
        <h3>¡Formulario enviado correctamente!</h3>
        <p>Gracias por completar el cuestionario nutricional. Nos pondremos en contacto contigo pronto.</p>
        <button id="close-success" class="success-button">Cerrar</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('nutrition-form');
      const successMessage = document.getElementById('success-message');
      const closeButton = document.getElementById('close-success');

      form.addEventListener('submit', function(e) {
        const required = ['nombre','apellido','email','telefono','edad','objetivo'];
        for (let field of required) {
          if (!form[field].value.trim()) {
            alert('Por favor complete todos los campos obligatorios (*)');
            e.preventDefault();
            return;
          }
        }
        setTimeout(function() {
          successMessage.classList.remove('hidden');
          successMessage.classList.add('visible');
          form.reset();
        }, 500);
      });

      closeButton.addEventListener('click', function() {
        successMessage.classList.remove('visible');
        successMessage.classList.add('hidden');
      });

      successMessage.addEventListener('click', function(e) {
        if (e.target === successMessage) {
          successMessage.classList.remove('visible');
          successMessage.classList.add('hidden');
        }
      });
    });
  </script>
</body>

</html>
